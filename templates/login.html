<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Enter a Value</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        input, select, button {
            font-size: 1em;
            padding: 8px 12px;
            margin: 5px;
            width: 180px;
        }
        #output {
            margin-top: 15px;
            font-weight: bold;
            color: #333;
        }
    </style>
</head>
<body>

    <h2>Register Appointment</h2>

    <input type="text" id="firstNameInput" placeholder="First Name">
    <input type="text" id="lastNameInput" placeholder="Last Name">
    
    <select id="timeInput">
    <option value="">Select a Time</option>
    <option>10:00 AM</option>
    <option>10:30 AM</option>
    <option>11:00 AM</option>
    <option>11:30 AM</option>
    <option>12:00 PM</option>
    <option>12:30 PM</option>
    <option>1:00 PM</option>
    <option>1:30 PM</option>
    <option>2:00 PM</option>
    <option>2:30 PM</option>
    <option>3:00 PM</option>
    <option>3:30 PM</option>
    <option>4:00 PM</option>
    <option>4:30 PM</option>
    <option>5:00 PM</option></select>

    <input type="text" id="dateInput" placeholder="Date">
    <input type="text" id="phoneInput" placeholder="Phone">
    <input type="text" id="emailInput" placeholder="Email">

    <button onclick="submitValue()">Enter</button>

    <div id="output"></div>

    <script>

        function submitValue() {

            // Read and trim inputs
            const firstName = document.getElementById("firstNameInput").value.trim();
            const lastName  = document.getElementById("lastNameInput").value.trim();
            const time      = document.getElementById("timeInput").value.trim();
            const date      = document.getElementById("dateInput").value.trim();
            const phone     = document.getElementById("phoneInput").value.trim();
            const email     = document.getElementById("emailInput").value.trim();

            const output = document.getElementById("output");

            // Empty-field validation
            if (!firstName || !lastName || !time || !date || !phone || !email) {
                output.textContent = "Please fill all fields.";
                output.style.color = "red";
                return;
            }

            // Phone validation: must be digits only and at least 10 long
            if (!/^\d{10,}$/.test(phone)) {
                output.textContent = "Phone number must be at least 10 digits and contain only numbers.";
                output.style.color = "red";
                return;
            }

            // Email format validation
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(email)) {
                output.textContent = "Please enter a valid email address.";
                output.style.color = "red";
                return;
            }

            // If valid:
            output.innerHTML = `
                Appointment Registered:<br>
                <strong>Name:</strong> ${firstName} ${lastName}<br>
                <strong>Time:</strong> ${time}<br>
                <strong>Date:</strong> ${date}<br>
                <strong>Phone:</strong> ${phone}<br>
                <strong>Email:</strong> ${email}
            `;
            output.style.color = "green";


            fetch("/api/appointments", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            })
            .then(res => res.json())
            .then(response => {
                document.getElementById("output").textContent =
                    "Appointment saved with ID: " + response.id;
                document.getElementById("output").style.color = "green";
            })
            .catch(err => {
                document.getElementById("output").textContent = "Error saving appointment.";
                document.getElementById("output").style.color = "red";
            });
        }


        function pullAppointmentNumber() {
            /* TODO:
               - Server should maintain a stack of numbers 00001â€“99999.
               - When an appointment is created, pop the top value.
               - Assign as Primary Key.
            */
        }

    </script>

</body>
</html>
